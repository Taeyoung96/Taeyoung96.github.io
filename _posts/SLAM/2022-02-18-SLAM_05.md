---
title : "Slam 5강 (The Basics about Bundle Adjustment) 요약"
category :
    - Slam
tag :
    - Slam
toc : true
toc_sticky: true
comments: true
---  

Cyrill 교수님의 SLAM 강의를 듣고 정리해보자!  

## 0. Today's Goal  

- Bundle Adjustment란?  
- Bundle Adjustment 과정


## 1. 강의 및 강의 자료  

강의 List는 [SLAM KR](https://www.youtube.com/channel/UCXvT7auo7xUd7v0B2pmvwIA)의 SLAM DUNK seson 2에서 정해준 강의를 따라 정리를 할 것이다.  

SLAM DUNK season 2의 Reference는 [여기](https://youtube.com/playlist?list=PLubUquiqNQdMYwQVftUSFEWhJgzBErO9N)서 확인해 볼 수 있다.  

SLAM KR에서 이 강의를 듣고 요약을 세미나 형식으로 준비를 해준다!  

이번 포스팅은 다음의 강의들을 참고하여 요약을 해보았다.  

- [The Basics about Bundle Adjustment (Cyrill Stachniss)](https://youtu.be/sobyKHwgB0Y)  
- [SLAM DUNK Season 2 - The Basics of Bundle Adjustment](https://youtu.be/sKbNkKwF0cA)  

Cyrill Stachniss의 강의 자료는 pdf로 [다운](https://drive.google.com/file/d/1g5pVXzZMhW5qxvEatd4ROxyMqqK8wKWf/view?usp=sharing) 받을 수 있다.  

## 2. Bundle Adjustment란?   

Bundle Adjustment란 <u>카메라의 이미지 data들로부터 3차원 공간으로 이미지에 나타난 정보들을 모델링을 진행할 때, 카메라의 pose와 3차원 공간의 points들의 위치를 추정할 때 필요한 최적화 기법 중 하나</u>이다.  

Bundle Adjustment를 설명하기 전에 우선 3D Reconstruction이 무엇인지부터 짚고 넘어가보자.  

3D Reconstruction을 진행할 때는 Lidar나 Depth camera같은 거리 값을 이용하는 것이 아니라 2D image들의 묶음(set)으로만 3D 복원을 진행한다.  

보통 SIFT와 같은 특징점을 찾는 알고리즘을 이미지에서 수행하고, Triangulation과 같은 과정을 거쳐 3차원 공간에 point들이 어디 위치하고 있는지 추정을 하게 된다.  

Triangulation의 경우 다른 포스팅에서 조금 더 자세하게 다룰 예정이다.  

예를 들어 한번 3D Reconstruction의 감을 잡아보자.  

<p align="center"><img src="https://user-images.githubusercontent.com/41863759/154620301-b2326c17-1137-4a36-858e-7928395e33bb.png" width = "400" ></p>  

위와 같은 드론으로 아래쪽에 위치한 카메라를 활용하여 3D Reconstruction을 수행하면 결과는 아래와 같다.  

<p align="center"><img src="https://user-images.githubusercontent.com/41863759/154620476-e2e15db1-fdb7-41aa-b4b7-3023d6972dc3.png" width = "500" ></p>  

위 그림에서 파란색 사각형 처럼 보이는 것이 이미지이고 아래쪽에 point cloud 형식으로 시각화된 것이 3차원 output이다. Bundle Adjustment의 결과를 활용하여 위와 같은 예제의 output을 만들 수 있는 것이다.  

강의에서는 3D Reconstruction과 관련된 이야기를 계속 하는데, 그렇다면 두 장의 이미지가 아닌 더 많은 이미지 set이 필요한 이유는 무엇일까?  

왜냐하면 물체를 3차원으로 표현할 때 2장의 이미지로는 물체의 복잡한 표면을 모두 담아낼 수 없기 때문이다. 따라서 조금 더 많은 이미지들을 활용하여 추정한 결과(camera pose or 3D location points)를 조금 더 정교하게 최적화하는 과정이 필수적으로 필요하다.  

최적화 과정(Bundle Adjustment)을 수행하면 아래와 같이 대규모의 Map을 만드는 것도 가능하다.  

<p align="center"><img src="https://user-images.githubusercontent.com/41863759/154623011-6d9b0b80-1ee1-4b53-b381-d337d6c5e573.png" width = "500" ></p>  

Bundle Adjustment는 Bundle Block Adjustment라고도 부르는데, Bundle Adjustment 과정을 Block 단위로 수행하여 많은 이미지 쌍을 동시에 고려를 해서 최적화를 수행하기 때문이다.  

Bundle Adjustment라는 개념은 1950년대 photogrammetry분야의 Aerial Triangulation라는 분야에서 처음 나왔다.  

<p align="center"><img src="https://user-images.githubusercontent.com/41863759/154623695-ec1b596e-e930-4db7-bb59-d3bd0ae011a6.png" width = "500" ></p>  

초창기에는 몇몇 3차원 point들이 어디있는지 안다는 가정하에 camera pose를 추정하였는데 이러한 point들을 control point라고 부른다.  


대략적인 Bundle Adjustment 개념부터 간략하게 Bundle Adjustment의 역사까지 훑아보았다. 그럼 어떻게 Bundle Adjustment가 동작하는지 알아보자.  

## 3. Bundle Adjustment 과정  

앞서 설명했지만, Bundle Adjustment과정은 여러 이미지 정보를 활용하여 camera pose와 3D points를 추정하는데 사용하는 최적화 방법이다.  

